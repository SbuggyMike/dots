<!-- SC_OFF --><div class="md"><p>I&#39;ve recently started work on a file manager in Go and FLTK and I just started implementing icons and mimetype reading. The way I&#39;ve gone about doing it is simply shelling out to the xdg-mime command, but it&#39;s very slow at determining types and it takes several seconds to assign icons to a couple hundred files.</p> <p>One solution I&#39;ve thought of would be to index which files have already been looked at (storing their names, mimetypes, time stamps and only re-scanning them if the time stamp is modified) but this seems patchy and would still be slow for the first time of looking at a directory.</p> <p>What&#39;s the best way to do this? I&#39;ve looked at libraries but there seems to be none for Go that actually use the system&#39;s mime database (which I consider a necessity as users may extend their system with custom types) and I&#39;d like my file manager to be compatible.</p> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/mgord9518"> /u/mgord9518 </a> <br/> <span><a href="https://www.reddit.com/r/linux/comments/wghfc4/how_do_file_managers_quickly_determine_file_magic/">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/linux/comments/wghfc4/how_do_file_managers_quickly_determine_file_magic/">[comments]</a></span>