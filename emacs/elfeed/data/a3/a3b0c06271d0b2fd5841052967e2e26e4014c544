<!-- SC_OFF --><div class="md"><p>So I&#39;ve done a few things that are relevant here to my Arch install:</p> <ol> <li>Enabled Secure Boot through <code>sbctl</code></li> <li>Reinstalled with Full Disk Encryption</li> <li>Enabled TPM + TPM pin for the above mentioned encryption</li> <li>Added SystemD hooks to the initrd</li> <li>Enabled Unified Kernel Image through sbctl&#39;s bundle feature</li> <li>Added plymouth</li> <li>Created /home partition</li> </ol> <p>The systemd and plymouth hooks are <code>systemd sd-encrypt sd-plymouth</code>.</p> <p>Everything works PERFECTLY, except this one flaw:</p> <p>When I boot up my system, I need to enter my password twice. Once for the root partition and once for /home (Keep in mind they are both TPM pins, added using <code>systemd-cryptenroll --tpm2-with-pin=yes</code>).</p> <p><a href="https://wiki.archlinux.org/title/Dm-crypt/System_configuration#Mounting_at_boot_time">Here</a> the <code>Tip:</code> mentions that it is cached in the kernel keyring, but it doesn&#39;t do anything for me.</p> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/EmbarrassedActive4"> /u/EmbarrassedActive4 </a> <br/> <span><a href="https://www.reddit.com/r/archlinux/comments/vyrwnw/how_to_not_enter_tpm2_pin_twice/">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/archlinux/comments/vyrwnw/how_to_not_enter_tpm2_pin_twice/">[comments]</a></span>