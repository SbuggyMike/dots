The warring sides agree to renew the truce just before it is due to end but there are doubts it can hold.