<!-- SC_OFF --><div class="md"><ul> <li>Following the wiki, I&#39;m trying to set up <a href="https://wiki.archlinux.org/title/QEMU#virtio">3D acceleration</a> with QEMU/KVM for as good of a performance without full GPU passthrough (my i5-2500k does not support Intel VT-d). For this, I have <code>-vga virtio -device virtio-vga-gl -display gtk,gl=on</code> but I get the error:</li> </ul> <blockquote> <p>&quot;Guest has not initialized the display (yet).&quot;</p> </blockquote> <p>Any ideas? I have not used virt-manager and basically only followed the instructions on the wiki page running everything using a very simple wrapper script that uses<code>qemu-img</code> and <code>qemu-system-x86_64</code>. Full command:</p> <pre><code>qemu-system-x86_64 -cdrom /home/greg/downloads/distro-isos/debian-11.4.0-amd64-netinst.iso -boot order=d -drive file=/home/greg/vm/debian-11,format=raw,if=virtio,cache=none,aio=native,cache.direct=on -vga virtio -device virtio-vga-gl -display gtk,gl=on -nic user,model=virtio-net-pci -enable-kvm -cpu host -smp 4 -m 2G </code></pre> <ul> <li>The <code>qemu-guest-agent</code> service does not start successfully. When I install the package, there&#39;s a message (not sure if related):</li> </ul> <blockquote> <p>Failed to get unit file state for qemu-ga.service: No such file or directory</p> </blockquote> <p>`journalctl -u qemu-guest-agent&#39; says:</p> <blockquote> <p>Dependency failed for QEMU Guest Agent. qemu-guest-agent.service: Job qemu-guest-agent.service/start failed with result &#39;dependency&#39;.</p> </blockquote> <ul> <li>Lastly, IIUC, by default network is emulated, so performance is not deal. To improve performance, the following can be used: <code>-netdev tap,id=network0,ifname=tap0,script=no,downscript=no,vhost=on</code>. Is it required that a bridge be set up or is that only if you want VM to act like another physical machine on the network (as I understand it)? I&#39;m on wireless and don&#39;t have access to ethernet interface so I&#39;m not sure if that&#39;s why I&#39;m getting <code>qemu-system-x86_64: -netdev tap,id=network0,ifname=tap0,script=no,downscript=no,vhost=on: could not configure /dev/net/tun (tap0): Operation not permitted</code> or if I need to actually set up a tap device and/or bridging. </li> </ul> <p>Much appreciated.</p> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/gregorie12"> /u/gregorie12 </a> <br/> <span><a href="https://www.reddit.com/r/archlinux/comments/wgbhmd/qemu_setting_up_3d_accel_and_some_questions/">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/archlinux/comments/wgbhmd/qemu_setting_up_3d_accel_and_some_questions/">[comments]</a></span>