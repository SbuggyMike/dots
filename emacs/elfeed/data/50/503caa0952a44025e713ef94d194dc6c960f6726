<!-- SC_OFF --><div class="md"><p>Hey, question about <code>resume=</code> for hibernating into swapfile on luks encrypted [everything but /boot]... Goal is full disk encrypt on lid close. Plan is get hibernate working and set <code>HandleLidSwitch=hibernate</code>. I first installed <a href="https://github.com/vianney/arch-luks-suspend">arch-luks-suspend</a> which seems to be working but is not asking for password to resume. If making arch-luks-suspend ask for pw is easier that&#39;d be fine too.</p> <p><a href="https://wiki.archlinux.org/title/Dm-crypt/Swap_encryption#With_suspend-to-disk_support">Both</a> <a href="https://wiki.archlinux.org/title/Power_management/Suspend_and_hibernate">pages</a> in wiki say &quot;Note: When resuming from a swapfile the resume parameter must point to the unlocked/mapped device that contains the file system with the swap file.&quot; However I&#39;m too noob to understand :)</p> <p>On previous non luks install, I followed the recommended <code>findmnt -no UUID -T /swapfile</code> and set <code>resume=UUID=[that output]</code></p> <p>Have tried that same thing, as well as <code>resume=/dev/mapper/luksdev</code> (same as it says for <code>root=</code>), <code>resume=/dev/sda2</code> (the luks&#39;d root partition), and <code>resume=UUID=[UUID of /dev/sda2 obtained from blkid, which is same as findmnt -no UUID -T /swapfile]</code>. Resume offset set as wiki recommends.</p> <p>Using systemd-boot. Installed everything w default options from <code>archinstall</code> including zram (zswap disabled). Swapfile is 23G which is memory size + 4x zram size rounded up to whole GiB. When <code>systemctl hibernate</code> it doesn&#39;t throw &quot;swap size too small&quot; error.</p> <p>I also found <a href="https://confluence.jaytaala.com/display/TKB/Use+a+swap+file+and+enable+hibernation+on+Arch+Linux+-+including+on+a+LUKS+root+partition">this guide</a> which labels the luks partition differently than <code>archinstall</code> does, though it also uses grub so don&#39;t know if it&#39;s relevant</p> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/Glittering-Lab-2234"> /u/Glittering-Lab-2234 </a> <br/> <span><a href="https://www.reddit.com/r/archlinux/comments/wd18m4/hibernate_luks_swapfile_wiki_clarification/">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/archlinux/comments/wd18m4/hibernate_luks_swapfile_wiki_clarification/">[comments]</a></span>