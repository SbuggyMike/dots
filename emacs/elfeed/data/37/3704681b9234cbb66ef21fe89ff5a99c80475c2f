<!-- SC_OFF --><div class="md"><p>Before starting to share what I learned, I&#39;ll need to give a bit of context on why I ended up learning how to mount a remote filesystem (my android device) over ssh.</p> <p>Recently, I wanted to create a backup of my android files. Keep in mind that I don&#39;t care about app data, I just want to backup images, videos, documents, etc.</p> <p>In the past, I wrote a script (leveraging adb) that creates backups of the specified folders. But there were some issues: - the script was not incremental, so at first it was fine, but now that I start to have more than 7 GB to backup, having to copy everything each time can be pretty slow - the script did not provide any kind of encryption: I am fine uploading my data on some cloud provider, so if my hdd breaks I can still recover it, but I do not want them to have access to it (this is why I immediately discarded things like Google Drive automatic upload)</p> <p>Since I know that <a href="https://www.borgbackup.org">borg backup</a> it is a pretty solid tool I wanted to give it a try and I ended up choosing <a href="https://github.com/borgbase/vorta">Vorta</a> to have a nice GUI experience.</p> <p>I was almost ready to make the backup and then I started facing issues: I soon discovered that an Android device connected via usb uses MTP to transfer files. Unfortunately, Vorta does not seem to support backups over this protocol (the application freezes when selecting the MTP &quot;partition&quot;).</p> <p>At first I searched for some solutions for mounting an MTP device on a Linux based system. I tried android file transfer for linux, mtpfs, jmtpfs, go-mtpfs, but I could not manage to make anything work. Probably it was something related to my desktop environment interfering with these programs by acquiring the lock on the device (as far as I understood MTP allows max one application to use it).</p> <p>After getting a bit discouraged since the easy solution failed, I ended up discovering that you can mount a remote filesystem over ssh using <a href="https://github.com/libfuse/sshfs">sshfs</a>.</p> <p>So, I set up an ssh server on my Android device using termux and then mounted it thanks to this wonderful tool, allowing Vorta to perform the backup as if it was a normal directory. </p> <p>Probably my solution is a bit of an overkill for what I wanted to achieve, but I am happy it worked and it was a great opportunity to learn some new tools and concepts.</p> <p>What solutions do you use to backup your Android data? If you know a better strategy I am curious to know it.</p> <p>P.S. If you want to replicate this setup I tracked down the steps a bit more in depth in the following <a href="https://gist.github.com/gturi/d88f628bc7f53cac273b51bf93b25408">gist</a>.</p> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/FlamingTuri"> /u/FlamingTuri </a> <br/> <span><a href="https://www.reddit.com/r/linux/comments/12yv35o/mounting_a_remote_filesystem_over_ssh_a_story_on/">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/linux/comments/12yv35o/mounting_a_remote_filesystem_over_ssh_a_story_on/">[comments]</a></span>