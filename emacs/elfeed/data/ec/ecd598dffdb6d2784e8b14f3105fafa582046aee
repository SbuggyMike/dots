<!-- SC_OFF --><div class="md"><p>I&#39;m trying to install Arch in a file container that I can push to a server later on. However, since today, pacstrap fails because it cannot umount /mnt/dev.</p> <pre><code>pacman -S arch-install-scripts Create the image: dd if=/dev/zero of=img.raw bs=1 count=0 seek=2G Create a loop device: losetup -f --show img.raw lsblk /dev/loop0 Partition the image: fdisk /dev/loop0 Create: root and set bootable Remount the image since the kernel doesn&#39;t read the new partition otherwise: losetup -d /dev/loop0 losetup -f --show img.raw lsblk /dev/loop0 Create the file systems: mkfs.ext4 /dev/loop0p1 Mount the filesystem: mount /dev/loop0p1 /mnt Install: pacstrap /mnt base linux vim </code></pre> <p>The above worked yesterday. I can also simply umount /mnt/dev manually without any issues. lsof shows nothing is using /mnt or /mnt/dev. I&#39;ve tried it on a new install with the same result, so it&#39;s not my configuration. Any ideas?</p> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/patenteng"> /u/patenteng </a> <br/> <span><a href="https://www.reddit.com/r/archlinux/comments/wa0l7j/pacstrap_fails_because_it_cannot_umount_mntdev/">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/archlinux/comments/wa0l7j/pacstrap_fails_because_it_cannot_umount_mntdev/">[comments]</a></span>