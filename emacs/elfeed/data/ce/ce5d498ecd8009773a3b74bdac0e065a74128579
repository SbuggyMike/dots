<!-- SC_OFF --><div class="md"><p>Hello, I have lsp-mode set up to work with clangd. I have the following config:</p> <pre><code>(use-package lsp-mode :commands (lsp lsp-deferred) :hook (lsp-mode . efs/lsp-mode-setup) :init ;; TODO: Properly use the general leader. (setq lsp-keymap-prefix &quot;C-c l&quot;) :config (lsp-enable-which-key-integration t)) (setq lsp-clangd-binary-path &quot;/usr/local/opt/llvm/bin/clangd&quot;) (add-hook &#39;c-mode-hook &#39;lsp) (add-hook &#39;c++-mode-hook &#39;lsp) </code></pre> <p>When I first open a cpp file, I start up in lsp-mode with the server connected. Then when I open another file in the same project, there is no lsp-mode. Running <code>M-x lsp</code> doesn&#39;t work, and running <code>M-x lsp-mode</code> causes lsp-mode to say it&#39;s disconnected. Moreover, running <code>M-x lsp-describe-session</code> shows the current file to be under the clangd instance in the tree alongside the other file that is indeed working.</p> <p>I was wondering if anyone has seen that before or has any tips on how to debug it. Thank you!</p> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/malgician"> /u/malgician </a> <br/> <span><a href="https://www.reddit.com/r/emacs/comments/w91tz0/lspmode_disconnected_when_opening_a_new_buffer/">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/emacs/comments/w91tz0/lspmode_disconnected_when_opening_a_new_buffer/">[comments]</a></span>