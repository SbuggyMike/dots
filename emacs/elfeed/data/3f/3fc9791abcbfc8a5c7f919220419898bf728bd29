<!-- SC_OFF --><div class="md"><h1>Update</h1> <p>Never mind, it works if I try it on a new project created via `cargo new`. Probably shouldn&#39;t have tested it on the `rustlings` exercises :&#39;). Still just in the beginning of my rust journey so wasn&#39;t clear when I could expect the completion to work (I presume it has to do with the `toml` file and the project structure, but happy to be corrected).</p> <p>Leaving my original post here though in case someone else faces the same &quot;issue&quot; as me in the future.</p> <h1>Original post</h1> <p>I am just starting to learn rust, and want to use eglot as my LSP client (as I am also using it for other languages). I am unable to get code completion and some other LSP features working. I have tried it with both <code>lsp-mode</code> and <code>eglot</code> and <code>corfu</code> and <code>company</code>, so I&#39;m not sure which part of my config is causing the issue (and therefore on which repo I should raise an issue). Maybe it is something with my rust/cargo setup? I do have rust-analyzer installed via its repo though...</p> <p>Any help is appreciated!</p> <h1>My setup</h1> <pre><code>(use-package eglot :ensure t :defer t :hook (python-mode-hook . eglot-ensure)) (use-package rustic :ensure t :config (setq rustic-format-on-save t) (setq rustic-lsp-client &#39;eglot)) (use-package corfu :ensure t :bind (:map corfu-map (&quot;C-j&quot; . corfu-next) (&quot;C-k&quot; . corfu-previous) (&quot;TAB&quot; . corfu-insert) (&quot;RET&quot; . nil)) :custom (corfu-cycle t) (corfu-auto t) :init (global-corfu-mode) (global-set-key (kbd &quot;M-i&quot;) #&#39;completion-at-point)) </code></pre> <h1>Issues</h1> <p>Syntax checking works:</p> <p><a href="https://preview.redd.it/p7av9g5aanf91.png?width=937&amp;format=png&amp;auto=webp&amp;s=d16ff9dcc66fdf0bd9a03ea73333f46662d72cc9">https://preview.redd.it/p7av9g5aanf91.png?width=937&amp;format=png&amp;auto=webp&amp;s=d16ff9dcc66fdf0bd9a03ea73333f46662d72cc9</a></p> <p>However code completion does not work (<code>corfu-mode</code> is on). Manually invoking <code>completion-at-point</code> returns &quot;No match&quot;.</p> <p>In addition, it also does not seem to check for existing modules:</p> <p><a href="https://preview.redd.it/p4t2fvmbanf91.png?width=937&amp;format=png&amp;auto=webp&amp;s=ac580f497fd7f9d34649ba29976187c969579a36">https://preview.redd.it/p4t2fvmbanf91.png?width=937&amp;format=png&amp;auto=webp&amp;s=ac580f497fd7f9d34649ba29976187c969579a36</a></p> <p>I would expect it to raise an error here as <code>ioo</code> does not exist?</p> <h1>What I have tried</h1> <ul> <li>Trying to use <code>company</code> instead of <code>corfu</code>. Same issues as above (both are working well for Python though).</li> <li>Followed <a href="https://www.bytedude.com/setting-up-rust-support-in-emacs/">this guide</a> which uses a similar setup.</li> <li>Tried an alternative setup with <code>lsp-mode</code> via <a href="https://robert.kra.hn/posts/rust-emacs-setup/">this guide</a> - still same issues.</li> <li>Trying a minimum config with <code>emacs -Q</code>.</li> </ul> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/fast-90"> /u/fast-90 </a> <br/> <span><a href="https://www.reddit.com/r/emacs/comments/wfuboo/rustic_eglot_unable_to_get_code_completion_working/">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/emacs/comments/wfuboo/rustic_eglot_unable_to_get_code_completion_working/">[comments]</a></span>