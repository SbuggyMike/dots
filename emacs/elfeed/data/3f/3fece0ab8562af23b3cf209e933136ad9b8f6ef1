<!-- SC_OFF --><div class="md"><p>I&#39;ve been fighting with clangd for a couple weeks, which was a big disappointment. For years I saw these interesting plugins to help code completion completely pass me by because converting the project I was on into a format understandable by clang was a huge hassle.</p> <p>Well, now I&#39;m working on an Unreal project, and its build steps let me create a compile_commands.json file that works with clangd. </p> <p>But the compile_commands.json file is about 745MB, and I was getting constant blocking stalls in emacs. If I opened up the eglot events buffer, it was scrolling endlessly, presumably because of background generation of semantic data that would be used for all the interesting stuff that you want to use clangd for.</p> <p>Hunting around, I found mention of clangd-indexer, which creates a static index. </p> <p>clangd-indexer has a few drawbacks:</p> <ul> <li>It is not updated live and can easily fall out of date. You will have to manage it.</li> <li>It takes time to make the index. I wouldn&#39;t recommend doing it while you&#39;re also trying to use it.</li> <li>It takes up extra space on disk.</li> <li>The documentation is absolutely miserable. Trying to figure out how to use it is a nightmare.</li> <li>Trying to figure out where to even DOWNLOAD it is cryptic; it&#39;s not part of the standard package.</li> </ul> <p>Where to download it:</p> <p><a href="https://github.com/clangd/clangd/releases/latest">https://github.com/clangd/clangd/releases/latest</a></p> <p>Some info on how to use it:</p> <p><a href="https://clangd.llvm.org/guides/remote-index">https://clangd.llvm.org/guides/remote-index</a></p> <p>(This mostly is attempting to detail how to set up a whole remote server with a static index that team would use. But you can also make a local index.)</p> <p>Some useful info from devs and a user going back and forth.</p> <p><a href="https://github.com/clangd/clangd/issues/479">https://github.com/clangd/clangd/issues/479</a></p> <p>The command line that I used (more or less)</p> <p><code>clangd-indexer -extra-arg=&quot;-Wno-everything&quot; --executor=all-TUs .\compile_commands.json &gt; clangd.dex</code></p> <p>And finally, the contents of my .clangd file:</p> <pre><code>CompileFlags: Remove: -W* Diagnostics Suppress: * Index: Background: Skip File: d:\p4v\Dev\clangd.dex </code></pre> <p>I know this isn&#39;t strictly an emacs topic, but this is where I get the majority of my exposure to clangd discussion.</p> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/vjgoh"> /u/vjgoh </a> <br/> <span><a href="https://www.reddit.com/r/emacs/comments/wjrvf7/making_clangd_fast_for_big_projects/">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/emacs/comments/wjrvf7/making_clangd_fast_for_big_projects/">[comments]</a></span>