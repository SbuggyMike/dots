The prime minister has made a fresh pledge on defence spending but has he broken his old one?