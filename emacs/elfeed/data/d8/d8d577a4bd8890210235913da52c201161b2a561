<!-- SC_OFF --><div class="md"><p>I&#39;m using dracut to boot UKI from UEFI, my partition scheme is a LVM on LUKS and has been working fine the last 2 months. My Dracut flags are these: ``` hostonly=&quot;yes&quot; hostonly_cmdline=&quot;no&quot; use_fstab=&quot;yes&quot; compress=&quot;zstd&quot; show_modules=&quot;yes&quot; early_microcode=&quot;yes&quot; add_dracutmodules+=&quot; lvm busybox dash &quot; uefi=&quot;yes&quot; uefi_splash_image=&quot;/usr/...&quot;</p> <p>CMDLINE=( rd.md=0 rd.dm=0 rd.lvm=1 rd.luks=1 rd.luks.uuid=xxxxxxx rd.luks.allow-discards=xxxxxxxx rd.lvm.lv=MyVol/root root=/dev/MyVol/root rootfstype=ext4 roootflags=rw,relatime,data=ordered rd.locale.lang=en_EN.utf8 )</p> <p>kernel_cmdline=&quot;${CMDLINE[@]}&quot; unset CMDLINE ```</p> <p>Kernel updates have been fine until now. Yesterday I updated the kernel and today the system won&#39;t boot. Dracut shows this error message: <code> dracut-pre-udev : modprobe: &quot;/kernel/drivers/md/dm-mod.ko.zst&quot;: invalid module format </code> then asks for the encrypted volume password. After entering the password systemd fails to load the device, I suppose because of the missing module: <code> [FAILED] Failed to start Cryptography Setup for luks-xxxxxxx dracut-initqueue: Job for systemd-cryptsetup@luks-xxxxx failed because the control process exited with error code dracut-initqueue: See &quot;systemd-cryptsetup@luks-xxxxx.service&quot; and &quot;journalctl -xeu &quot;systemd-cryptsetup@luks-xxxxxxxx.service&quot;&quot; for details. </code></p> <p>Tried to boot with live iso and regenerate the UKI, but the same happened. Also tried to install, generate the UKI and boot with the LTS kernel, but didn&#39;t work either. Installation of the kernel went well, integrity of the package passed, so I guess the kernel module file is not corrupted. The dracut log when generating the image didn&#39;t show any error.</p> <p>I&#39;m out of ideas of what is happening. Anyone knows how to deal with this? Any ideas of what is happening?</p> <p>EDIT: a couple of error messages during boot that I missed: <code> dracut-initqueue: Configuration node devices/filter not found dracut-initqueue: Configuration node devices/global_filter not found </code></p> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/ZJaume"> /u/ZJaume </a> <br/> <span><a href="https://www.reddit.com/r/archlinux/comments/13j1st5/failed_to_boot_dracut_cant_load_device_mapper/">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/archlinux/comments/13j1st5/failed_to_boot_dracut_cant_load_device_mapper/">[comments]</a></span>