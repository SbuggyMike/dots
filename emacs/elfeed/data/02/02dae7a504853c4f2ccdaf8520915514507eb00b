<!-- SC_OFF --><div class="md"><p>Hi </p> <p>While chasing an apparent OverlayFS bug that I thought was a regression in the kernel, I made a script that makes it easy to build a kernel, and test in a QEMU VM, and get the result of a script that runs. (In the guest, the test script has to echo the return code of the test to /dev/ttyS1 so that it can be read by the host in a file. Any other logging info can be echoed to /dev/ttyS0)</p> <p>I never got around to wrapping it around git bisect, as it turns out the issue is NOT in the mainline kernel, but it is in Ubuntu itself due to a singular patch that gets applied to OverlayFS downstream, so it was simpler than I thought. </p> <p>I don&#39;t want the script to go to waste, but If anyone finds something like this helpful The link is here. It need to run as root for the loopback mounting of the image to work, and for debootstrap to run <a href="https://gist.github.com/n3rdopolis/95a916ab07066290ee4abc7a84f98098">https://gist.github.com/n3rdopolis/95a916ab07066290ee4abc7a84f98098</a></p> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/n3rdopolis"> /u/n3rdopolis </a> <br/> <span><a href="https://www.reddit.com/r/linux/comments/1331kw3/script_that_compiles_a_kernel_puts_the_modules_in/">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/linux/comments/1331kw3/script_that_compiles_a_kernel_puts_the_modules_in/">[comments]</a></span>